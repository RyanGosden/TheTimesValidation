$(function(){function a(a){$.ajax({url:a,dataType:"json",success:function(a){$("#form-title").text(a.title),$("#lang-text").text(a.langtext),$("#lang-eng").text(a.selectlanguage.english),$("#lang-mlt").text(a.selectlanguage.maltese),$("#label-username").text(a.form.usr),$("#label-email").text(a.form.email),$("#label-pass1").text(a.form.password),$("#label-pass2").text(a.form.repassword),e=a}})}function b(a){function b(a,b,c){for(var d=0;a>d;d++)$("#pwstr-bar").append('<div class="pwstr-block"></div>');$(".pwstr-block").css("background-color",c),$("#pwstr-text").text(b)}var c,d;$(".pwstr-block").remove(),a>=0&&24>=a&&(c=e.message.passstrength.vweak,d="red",b(1,c,d)),a>=25&&49>=a&&(c=e.message.passstrength.weak,d="#FF6347",b(2,c,d)),a>=50&&59>=a&&(c=e.message.passstrength.average,d="#FFA62F",b(3,c,d)),a>=60&&69>=a&&(c=e.message.passstrength.strong,d="#89C35C",b(4,c,d)),a>=70&&79>=a&&(c=e.message.passstrength.vstrong,d="#54C571",b(5,c,d)),a>=80&&89>=a&&(c=e.message.passstrength.secure,d="#4CC417",b(6,c,d)),a>=90&&(c=e.message.passstrength.vsecure,d="green",b(7,c,d))}function c(a){function c(){a.length<=4&&(g+=5,d()),a.length>=5&&a.length<=7&&(g+=10,d()),a.length>=8&&(g+=25,d())}function d(){a.match(/[a-z]/g)&&a.match(/[A-Z]/g)?(g+=25,e()):e()}function e(){if(null===a.match(/\d/g))f();else{var b=a.match(/\d/g).length;1>=b?(g+=10,f()):(g+=25,f())}}function f(){if(null===a.match(/[^A-Za-z0-9_]/g))b(g);else{var c=a.match(/[^A-Za-z0-9_]/g).length;0===c&&b(g),1>=c?(g+=10,b(g)):(g+=25,b(g))}}var g=0;c()}function d(a){return g=a}var e,f="json/en-lang.json";a(f);var g,h={empty:function(a){var b=0;return""===a[b]||0===a[b].length||null===a[b]?!1:!0},userAvailable:function(a,b){$("#username-group").removeClass("has-success has-error"),$("#helpBlock1").text("");b.replace(/\s/g,"");$.ajax({type:"POST",url:"checkuser.php",data:{username:b},success:function(c){""===b?($("#username-group").addClass("has-error"),$("#helpBlock1").text(e.message.empty).show(),a(!1)):"exists"==c?($("#username-group").addClass("has-error"),$("#helpBlock1").text(e.message.username.fail).show(),a(!1)):($("#username-group").addClass("has-success"),$("#helpBlock1").text(e.message.username.pass).show(),a(!0))}})},emailValid:function(a){$("#email-group").removeClass("has-success has-error");var b=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;return b.test(a)?($("#email-group").addClass("has-success"),$("#helpBlock2").text(e.message.email.pass).show(),!0):($("#email-group").addClass("has-error"),$("#helpBlock2").text(e.message.email.fail).show(),!1)},pwdMatch:function(a,b){return $("#pw2-group").removeClass("has-success has-error"),a===b?($("#pw2-group").addClass("has-success"),$("#helpBlock4").text(e.message.passmatch.pass).show(),!0):($("#pw2-group").addClass("has-error"),$("#helpBlock4").text(e.message.passmatch.fail).show(),!1)},checkCaptcha:function(){return $("#captcha-group").removeClass("has-success has-error"),0!==grecaptcha.getResponse().length?!0:($("#captcha-group").addClass("has-error"),$("#helpBlock5").text(e.message.recaptcha).show(),!1)},pwdComplex:function(a){return $("#pw1-group").removeClass("has-success has-error"),null===a||""===a||void 0===a?($("#pw2-group").addClass("has-error"),$("#helpBlock3").text(e.message.empty).show(),!1):a.length>=7&&a.match(/\d+/g)&&a.match(/[a-z]/g)&&a.match(/[A-Z]/g)&&a.match(/^[\w\W]*\W[\w\W]*$/)?($("#pw1-group").addClass("has-success"),$("#helpBlock3").text(e.message.complex.pass).show(),!0):($("#pw1-group").addClass("has-error"),$("#helpBlock3").text(e.message.complex.fail).show(),!1)}};$("#lang-eng").on("click",function(){f="json/en-lang.json",a(f)}),$("#lang-mlt").on("click",function(){f="json/ml-lang.json",a(f)}),$("#submit").on("click",function(a){var b=$("#username").val(),c=$("#email").val(),e=$("#password1").val(),f=$("#password2").val(),i=[];i.push(b,c,e,f);h.userAvailable(d,b);h.checkCaptcha()===!1?a.preventDefault():g===!0&&0!==grecaptcha.getResponse().length==!0&&h.emailValid(c)===!0&&h.pwdComplex(e)===!0&&h.pwdMatch(e,f)===!0&&h.empty(i)===!0?console.log("form validation successful."):(a.preventDefault(),console.log("form validation failed."))}),$("#username").on("keyup",function(){var a=$("#username").val();h.userAvailable(d,a)}),$("#email").on("keyup",function(){var a=$("#email").val();h.emailValid(a)}),$("#password1").on("keyup",function(){$(".pwstr-block").remove();var a=$("#password1").val();c(a),h.pwdComplex(a)}),$("#password2, #password1").on("keyup",function(){var a=$("#password1").val(),b=$("#password2").val();h.pwdMatch(a,b)})});